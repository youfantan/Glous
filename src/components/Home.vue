<template>
  <div>
    <v-row dense>
      <v-col cols="4">
        <v-card
            outlined
        >
          <v-skeleton-loader
              v-if="loading"
              :transition="transition"
              height="400"
              type="card"
          >
          </v-skeleton-loader>
          <v-img
              :src="avatar_src"
              v-show="!loading"
              class="grey-text align-end"
              height="400px"
          >
            <v-card-title>Glous</v-card-title>
            <v-card-text class="text--white">
              <div>ä¸šä½™å¼€å‘è€…ï¼Œåˆä¸­å­¦ç”Ÿã€‚</div>
              <div>Spare Developer.Junior school student.</div>
            </v-card-text>
          </v-img>

          <v-card-actions>
            <v-spacer></v-spacer>

            <v-btn icon href="https://github.com/youfantan" target="_blank">
              <v-icon>$vuetify.icons.githubicon</v-icon>
            </v-btn>

            <v-btn icon href="https://www.zhihu.com/people/shan-dian-ku-li-she" target="_blank">
              <v-icon>$vuetify.icons.zhihuicon</v-icon>
            </v-btn>

            <v-btn icon href="https://space.bilibili.com/344835892?spm_id_from=333.1007.0.0" target="_blank">
              <v-icon>$vuetify.icons.bilibilicon</v-icon>
            </v-btn>
            <v-btn icon >
              <v-icon class="material-symbols-outlined">
                rss_feed
              </v-icon>
            </v-btn>
          </v-card-actions>
        </v-card>
        <v-skeleton-loader
            v-if="!article.loaded"
            :transition="transition"
            height="200"
            type="card"
        >
        </v-skeleton-loader>
        <v-card style="margin-top: 20px" @click="loadArticle" v-if="article.loaded">
          <v-card-title>
              æ¨èæ–‡ç«  | Daily Article
          </v-card-title>
          <v-card-subtitle>
            {{article.title}}
          </v-card-subtitle>
          <v-card-text>
            <p>{{article.description}}</p>
            <strong>é˜…è¯»æœ¬æ–‡çº¦éœ€è¦ {{article.time_cost}} | æœ¬æ–‡ä¸Šä¼ äº {{article.time}}</strong>
          </v-card-text>
        </v-card>
      </v-col>
      <v-col cols="s6">
        <v-card>
          <v-card-title>About Me</v-card-title>
          <v-card-text>
            <h3 style="margin-top: 20px">ğŸ‘‹Spare developer.Interested in develop works about Genshin Impact, Minecraft.</h3>
            <h3 style="margin-top: 20px">âœï¸This site will record some of my develop activities.For more information,please visit my github account.Most of my personal projects are hosted in github.</h3>
            <h3 style="margin-top: 20px">âŒ¨ï¸The language I am most familiar with is Java but I'm still a junior developer of Java.</h3>
            <h3 style="margin-top: 20px">ğŸ“„You can click the app bar to switch the pages.Now this site have page of Projects and Pages.</h3>
            <h3 style="margin-top: 20px">ğŸ³ï¸I'm developing KleeBot recently.KleeBot is a QQ bot that can post information of Genshin, Minecraft, Pixiv, Bilibili etc.The project is based on Mirai.</h3>
          </v-card-text>
        </v-card>
        <v-card style="margin-top: 20px">
          <v-card-title>å…³äºæˆ‘</v-card-title>
          <v-card-text>
            <h3 style="margin-top: 20px">ğŸ‘‹ä¸šä½™å¼€å‘è€…ï¼Œå¯¹æœ‰å…³åŸç¥ã€Minecraftçš„å¼€å‘æ„Ÿå…´è¶£ã€‚</h3>
            <h3 style="margin-top: 20px">âœï¸è¿™ä¸ªç½‘ç«™å°†è®°å½•æˆ‘çš„è®¸å¤šå¼€å‘æ´»åŠ¨ã€‚å¯¹äºæ›´å¤šä¿¡æ¯ï¼Œè¯·åœ¨æˆ‘çš„Githubä¸ŠæŸ¥çœ‹ã€‚æˆ‘çš„å¤§å¤šæ•°é¡¹ç›®éƒ½æ‰˜ç®¡åœ¨Githubã€‚</h3>
            <h3 style="margin-top: 20px">âŒ¨ï¸æˆ‘æœ€ç†Ÿæ‚‰çš„è¯­è¨€æ˜¯Javaï¼Œä½†æˆ‘ä»ç„¶æ˜¯åˆå­¦è€…ã€‚</h3>
            <h3 style="margin-top: 20px">ğŸ“„ä½ å¯ä»¥ç‚¹å‡»è¿™ä¸ªé¡µé¢çš„åº”ç”¨æ ä»¥åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ã€‚ç°åœ¨è¿™ä¸ªç«™ç‚¹æœ‰å…³äºæˆ‘çš„é¡¹ç›®å’Œæ–‡ç« çš„é¡µé¢ã€‚</h3>
            <h3 style="margin-top: 20px">ğŸ³ï¸æˆ‘æœ€è¿‘åœ¨å¼€å‘KleeBotã€‚KleeBotæ˜¯ä¸€ä¸ªå¯ä»¥æ¨é€æœ‰å…³åŸç¥ã€Minecraftã€Pixivã€Bç«™ç­‰çš„æ¶ˆæ¯çš„QQæœºå™¨äººã€‚å®ƒåŸºäºMiraié¡¹ç›®å¼€å‘ã€‚</h3>
            <h3></h3>
          </v-card-text>
        </v-card>
      </v-col>
    </v-row>
  </div>
</template>

<script>

export default {
  name: "Home",
  data:()=>({
    loading: true,
    transition: 'scale-transition',
    avatar_src: '',
    article:{
      loaded: false,
      url: '',
      title: '',
      time: '',
      time_cost: '',
      description: ''
    }
  }),
  methods:{
    arrayBufferToBase64 (buffer) {
      let binary = '';
      const bytes = new Uint8Array(buffer);
      const len = bytes.byteLength;
      for (let i = 0; i < len; i++) {
        binary += String.fromCharCode(bytes[i])
      }
      return window.btoa(binary)
    },
    init() {
      const chosen = Math.floor(Math.random() * 4);
      const url = "./image/" + chosen + ".b64";
      this.$http.get(url)
          .then(response => {
            this.avatar_src='data:image/jpg;base64,'+response.data
            this.loading=false;
      })
      this.$http.get('articles/articles.json').then((resp)=>{
        const data_articles=resp.data.articles;
        console.log(data_articles)
        const article_chosen=data_articles[Math.floor(Math.random()*data_articles.length)];
        this.article={
          loaded: true,
          url: article_chosen.url,
          title: article_chosen.title,
          time: article_chosen.time,
          time_cost: article_chosen.time_cost,
          description: article_chosen.description
        }
        this.$forceUpdate()
      })
    },
    loadArticle(){
      this.$http.get(this.article.url).then((resp)=>{
        this.$emit('loadmdview',resp.data)
      })
    }
  },
  created() {
    this.init()
  }
}
</script>

<style>
.material-symbols-outlined {
  font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 48
}
</style>